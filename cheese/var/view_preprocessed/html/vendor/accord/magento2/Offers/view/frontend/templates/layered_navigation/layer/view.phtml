<?php /** * Copyright Â© 2016 Magento. All rights reserved. * See COPYING.txt for license details. */ ?> <?php /** * Category layered navigation * * @var $block \Magento\LayeredNavigation\Block\Navigation */ ?> <?php if ($block->canShowBlock()): ?> <div id="" class="block filter" id="layered-filter-block" data-mage-init='{"collapsible":{"openedState": "active", "collapsible": true, "active": false, "collateral": { "openedState": "filter-active", "element": "body" } }}'><?php $filtered = count($block->getLayer()->getState()->getFilters()) ?> <div class="block-title filter-title" data-count="<?php /* @escapeNotVerified */ echo $filtered; ?>"><strong data-role="title"><?php /* @escapeNotVerified */ echo __('Shop By') ?></strong></div><div class="block-content filter-content"><?php echo $block->getChildHtml('state') ?> <?php $wrapOptions = false; ?> <?php /** @var Magento\CatalogSearch\Model\Layer\Filter\Attribute $filter */ foreach ($block->getFilters() as $filter): ?> <?php $attributeModel = $filter->getData('attribute_model'); $attributeCode = !empty($attributeModel) ? $attributeModel->getData('attribute_code') : null; ?> <?php if ($filter->getItemsCount() && $attributeCode != \Accord\Offers\Model\SpecialOffers::OFFERS_ATTRIBUTE_CODE): ?> <?php if (!$wrapOptions): ?> <strong role="heading" aria-level="2" class="block-subtitle filter-subtitle"><?php /* @escapeNotVerified */ echo __('Shopping Options') ?></strong> <div class="filter-options" id="narrow-by-list" data-role="content" data-mage-init='{"accordion":{"openedState": "active", "collapsible": true, "active": false, "multipleCollapsible": false}}'><?php $wrapOptions = true; endif; ?> <div data-role="collapsible" class="filter-options-item" id="<?php echo $filter->getRequestVar() ?>"><div data-role="title" class="filter-options-title"><span><?php /* @escapeNotVerified */ echo __($filter->getName()) ?></span></div><div data-role="content" class="filter-options-content"><?php /* @escapeNotVerified */ echo $block->getChildBlock('renderer')->render($filter); ?></div></div><?php endif; ?> <?php endforeach; ?> <?php if ($wrapOptions): ?></div><?php else: ?> <script>
                    require([
                        'jquery'
                    ], function ($) {
                        $('#layered-filter-block').addClass('filter-no-options');
                    });</script><?php endif; ?></div></div><?php endif; ?>