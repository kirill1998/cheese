<?php /** * Template for displaying products list widget * * @var $block \Accord\Catalog\Block\Widget\ProductsList\BestSellers | \Accord\Catalog\Block\Widget\ProductsList\NewProduct */ use Magento\Framework\App\Action\Action; $param = $block->getProductCollection(); ?> <?php if ($exist = ($block->getProductCollection() && $block->getProductCollection()->getSize())): ?> <?php $block->loadItemsByProductCollection($block->getProductCollection()); $type = $block->getData('type'); $mode = $block->getData('mode'); $image = 'category_page_grid'; $title = $block->getTitle() ? __($block->getTitle()) : ''; $items = $block->getProductCollection()->getItems(); $showWishlist = true; $showCompare = true; $showCart = true; $templateType = \Magento\Catalog\Block\Product\ReviewRendererInterface::DEFAULT_VIEW; $description = false; ?> <div class="block widget block-products-list <?= $mode ?> <?= $type ?>"><?php if ($title): ?> <div class="block-title"><strong><?php /* @escapeNotVerified */ echo $title; ?></strong></div><?php endif ?> <div class="block-content"><?php /* @escapeNotVerified */ echo '<!-- ' . $image . '-->' ?> <div class="products-<?php /* @escapeNotVerified */ echo $mode; ?> <?php /* @escapeNotVerified */ echo $mode; ?>"><div data-mage-init='{"accord.carousel":{}}' class="product-items product-items_custom owl-carousel owl-carousel_custom-hteme js-owl-carousel <?php /* @escapeNotVerified */ echo $type; ?>"><?php foreach ($items as $_product): ?> <div class="product-item"><?php $scope = 'ko_itemGrid_' . rand(10, 100000); ?> <div data-bind="scope: '<?= $scope ?>'" class="product-item-info"><a href="<?php /* @escapeNotVerified */ echo $block->getProductUrl($_product) ?>" class="product-item-photo"><?php echo $block->getImageCustom($_product, $image)->toHtml(); ?></a> <div class="product-item-details"><strong class="product-item-name"><a title="<?php echo $block->escapeHtml($_product->getName()) ?>" href="<?php /* @escapeNotVerified */ echo $block->getProductUrl($_product) ?>" class="product-item-link"><?php echo $block->escapeHtml($_product->getName()) ?></a></strong> <!-- size --><div data-bind="html: packSize" class="ac_size"></div><?php if ($showWishlist || $showCompare || $showCart): ?> <div class="product-item-actions"><div class="clearfix product-item__review-wr"><!-- rating --><?php if ($templateType): ?> <?php echo $block->getReviewsSummaryHtml($_product, $templateType, true) ?> <?php endif; ?> <div class="actions-secondary" data-role="add-to-links"><?php if ($showWishlist || $showCompare): ?> <?php if ($block->getAddToCompareUrl() && $showCompare): ?> <?php $compareHelper = $this->helper('Magento\Catalog\Helper\Product\Compare'); ?> <a href="#" class="action tocompare" data-post='<?php /* @escapeNotVerified */ echo $compareHelper->getPostDataParams($_product); ?>' title="<?php /* @escapeNotVerified */ echo __('Add to compare') ?>"><span><?php /* @escapeNotVerified */ echo __('Add to compare') ?></span></a> <?php endif; ?> <?php if ($this->helper('Magento\Wishlist\Helper\Data')->isAllow() && $showWishlist): ?> <a href="#" data-post='<?php /* @escapeNotVerified */ echo $block->getAddToWishlistParams($_product); ?>' class="action towishlist" data-action="add-to-wishlist" title="<?php /* @escapeNotVerified */ echo __('Add to wish list') ?>"><span><?php /* @escapeNotVerified */ echo __('Add to wish list') ?></span></a> <?php endif; ?> <?php endif; ?></div></div><!-- ko template: "Accord_Ui/inc/price"--><!-- /ko --><div class="clearfix"><?php if ($block->shouldRenderQuantity()): ?> <!-- qty --><div class="qty__wr"><!-- ko template: "Accord_Ui/inc/qty"--><!-- /ko --></div><!-- ko template: "Accord_Ui/inc/qtyType"--><!-- /ko --><?php endif; ?> <div class="line-message__btn-wr" data-bind="with: lineMessageModel()"><!-- ko template: getTemplate() --><!-- /ko --></div></div><?php if ($showCart): ?> <div class="actions-primary"><?php /** * @see magento/app/code/Accord/Ui/view/frontend/web/template/itemAjaxSubs.html */ ?> <?php if ($_product->isSaleable()): ?> <!-- ko template: "Accord_Ui/inc/addCart"--><!-- /ko --><?php else: ?> <?php if ($_product->getIsSalable()): ?> <div class="stock available"><span><?php /* @escapeNotVerified */ echo __('In stock') ?></span></div><?php else: ?> <div class="stock unavailable"><span><?php /* @escapeNotVerified */ echo __('Out of stock') ?></span></div><?php endif; ?> <?php endif; ?></div><?php endif; ?></div><?php endif; ?></div></div><script type="text/x-magento-init">
                            {
                                "*": {
                                    "Magento_Ui/js/core/app": {
                                        "components": {
                                            "<?= $scope ?>": {
                                                "templateLineMessage": "Accord_Ui/lineMessage",
                                                "component": "Accord_Ui/ko/itemGrid",
                                                "data": <?= json_encode($block->decorateProduct($_product)) ?>
                                            }
                                        }
                                    }
                                }
                            }</script></div><?php endforeach ?></div></div><?php echo $block->getPagerHtml() ?></div></div><?php endif; ?>